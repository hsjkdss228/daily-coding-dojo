# 💡 How to solve it?
> 문제를 풀기 전에 어떻게 풀 것인지 먼저 생각을 정리하고, 다 풀고 나서 회고한다.

## 혼자 놀기의 달인

> 연습문제

- https://school.programmers.co.kr/learn/courses/30/lessons/131130
- 상자 안에 들어있는 카드 번호가 순서대로 담긴 배열 cards가 매개별수로 주어질 때,
  게임에서 얻을 수 있는 최고 점수를 return한다.

### 23.4.14

#### 1. 이해

1. 주어진 조건은 무엇인가?
   1. 규칙
      - 숫자 카드 더미에는 1부터 100까지의 숫자가 하나씩 적혀 있는 숫자 카드 100장이 있음
      - 2 이상 100 이하의 자연수를 하나 정해
        그 수보다 작거나 같은 숫자 카드들과, 카드 수만큼의 상자를 준비
      1. 상자에 카드를 한 장씩 넣고 상자를 무작위로 섞어 일렬로 나열
      2. 나열된 상자의 순서에 따라 상자에 1부터 순차적으로 증가하는 번호를 부여
      3. 다음의 과정을 수행
         1. 임의의 상자를 하나 선택해 상자 안의 숫자 카드를 확인
         2. 카드에 적혀있는 숫자에 해당하는 상자를 열어 상자 안의 숫자 카드를 확인
         3. ...
         4. 카드에 적혀있는 숫자에 해당하는 상자가 이미 열려 있을 때까지 반복
      4. 이렇게 연 상자들이 1번 상자 그룹.
      5. 1번 상자 그룹은 다른 상자들과 섞이지 않도록 따로 둠.
         이때 1번 상자 그룹을 제외하고 남는 상자가 없으면 그대로 게임 종료. 이때 획득한 점수는 0점
      6. 그렇지 않다면, 남은 상자 중 다시 임의의 상자 하나를 골라
         같은 방식으로 이미 열려있는 상자가 나올 때까지 상자를 여는 과정을 수행
      7. 이렇게 연 상자들은 2번 상자 그룹.
      8. 1번 상자 그룹의 상자 개수 * 2번 상자 그룹의 상자 개수가 게임의 점수.
   2. 제한사항
      - cards의 길이: 2 이상 100 이하
      - cards의 원소: 1 이상 cards의 길이 이하인 임의의 자연수
      - cards[index]: index + 1번 상자에 담긴 카드에 적힌 숫자
      - cards에는 중복되는 원소는 존재하지 않음
   3. 추론
      - '상자를 무작위로 섞어 일렬로 나열한다'는 게임을 진행할 때의 규칙이지,
        최고 점수를 구하기 위한 과정에 굳이 그런 프로세스는 넣지 않아도 될 것 같다.
        숫자는 배열에 이미 임의로 주어지는 것 같음.
      - 상자 그룹은 하나의 경우, 두 경우뿐만 아니라 여러 경우의 수가 나올 수 있을 것이다.

2. 내가 이용할 수 있는 것은 무엇인가?
   - 카드의 번호
   - 카드가 담기는 상자의 번호

3. 내가 모르는 건 무엇인가?
   - 어떤 상자에서 카드 번호를 알았을 때, 그 카드 번호로 다음 상자를 어떻게 찾을 것인지
   - 조건에 맞게 생성된 상자의 그룹

#### 2. 계획

##### 최초 풀이

- Map을 사용할 수 있을 것 같다.
  - Key: 상자 번호
  - Value: 카드 번호
- 박스 그룹은 어떤 그룹인지는 알 필요는 없고, 개수만 알면 되기 때문에
  개수만 별도로 List에 집계한다.

1. cards를 순회하면서 순회하는 index + 1을 Key,
   cards[i]의 값을 Value인 쌍으로 변환하고, 최종적으로 Map으로 변환
2. List<집계 Count> 정의
3. Map이 빌 때까지 다음을 계속 반복
   1. entrySet에서 첫 번째 쌍을 추출.
      쌍의 key는 상자 번호, value는 새로운 상자 번호가 될 카드 번호
   2. Map에서 찾는 새로운 상자 번호에 해당하는 Key가 없을 때까지 다음을 반복
      - Map에서 찾아온 카드 번호 값을 새로운 상자 번호로 기억하고,
        해당 쌍을 Map에서 삭제, 집계 Count += 1
   3. 집계 Count를 List에 add
4. 집계 Count List에 하나의 값만 들어있으면 0을 반환
5. 집계 Count List를 정렬해 가장 큰 값 두개를 반환

#### 3. 실행

- 이해/계획: 15:30-16:00, 19:10-19:30 (50분)
- 풀이: 22:00-22:50 (50분)

#### 4. 반성

- 앞으로는 Stream을 내림차순으로 정렬할 때 sorted()에 인자로
  (previous, next) -> next - previous 대신
  Comparator.reverseOrder()를 전달하도록 하자.
